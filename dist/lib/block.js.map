{"version":3,"sources":["../../lib/block.js"],"names":["mongoose","require","module","exports","textConfig","text","String","buttons","title","block_id","type","Schema","Types","ObjectId","ref","required","jsonConfig","url","method","user_attributes","show_error_messages","Boolean","galleryConfig","gallery_cards","item_url","image_url","Object","BlockSchema","referral_active","builtin","cards","plugin_id","config","is_valid","Model","model","e"],"mappings":"AAAA;;AACA,IAAIA,WAAWC,QAAQ,UAAR,CAAf;;AAEAC,OAAOC,OAAP,GAAiB,YAAY;AAC3B,MAAIC,aAAa;AACfC,UAAMC,MADS;AAEfC,aAAS,CACP;AACEC,aAAOF,MADT;AAEEG,gBAAU,CAAC,EAACC,MAAMV,SAASW,MAAT,CAAgBC,KAAhB,CAAsBC,QAA7B,EAAuCC,KAAK,OAA5C,EAAqDC,UAAU,KAA/D,EAAD;AAFZ,KADO;AAFM,GAAjB;;AASA,MAAIC,aAAa;AACfC,SAAKX,MADU;AAEfY,YAAQZ,MAFO;AAGfa,qBAAiB,CAACb,MAAD,CAHF;AAIfc,yBAAqBC;AAJN,GAAjB;;AAOA,MAAIC,gBAAgB;AAClBC,mBAAe,CAAC;AACdf,aAAOF,MADO;AAEdkB,gBAAUlB,MAFI;AAGdmB,iBAAWnB,MAHG;AAIdC,eAAS,CAACmB,MAAD;AAJK,KAAD;AADG,GAApB;;AASA,MAAIC,cAAc,IAAI3B,SAASW,MAAb,CAAoB;AACpCiB,qBAAiBP,OADmB;AAEpCb,WAAOF,MAF6B;AAGpCuB,aAASR,OAH2B;AAIpCS,WAAO,CAAC;AACN;AACA;AACA;AACAC,iBAAWzB,MAJL;AAKN;AACA0B,cAAQN;AANF,KAAD,CAJ6B;AAYpCO,cAAUZ;AAZ0B,GAApB,CAAlB;;AAeA,MAAIa,cAAJ;AACA,MAAI;AACF;AACAA,YAAQlC,SAASmC,KAAT,CAAe,OAAf,CAAR;AACD,GAHD,CAGE,OAAOC,CAAP,EAAU;AACVF,YAAQlC,SAASmC,KAAT,CAAe,OAAf,EAAwBR,WAAxB,CAAR;AACD;AACD,SAAOO,KAAP;AACD,CAjDD","file":"block.js","sourcesContent":["'use strict'\nvar mongoose = require('mongoose')\n\nmodule.exports = function () {\n  let textConfig = {\n    text: String,\n    buttons: [\n      {\n        title: String,\n        block_id: [{type: mongoose.Schema.Types.ObjectId, ref: 'block', required: false}]\n      }]\n  }\n\n  let jsonConfig = {\n    url: String,\n    method: String,\n    user_attributes: [String],\n    show_error_messages: Boolean\n  }\n\n  let galleryConfig = {\n    gallery_cards: [{\n      title: String,\n      item_url: String,\n      image_url: String,\n      buttons: [Object]\n    }]\n  }\n\n  let BlockSchema = new mongoose.Schema({\n    referral_active: Boolean,\n    title: String,\n    builtin: Boolean,\n    cards: [{\n      // \"id\": \"58927d59e4b099e9389e51f5\",\n      // \"plugin_id\": \"ai\",\n      // name of plugin i.e. text, gallery, ai,json_plugin,etc\n      plugin_id: String,\n      // is determined by the plugin_id which each have a unique config type: Object\n      config: Object\n    }],\n    is_valid: Boolean\n  })\n\n  let Model;\n  try {\n    // Throws an error if \"Name\" hasn't been registered\n    Model = mongoose.model('block')\n  } catch (e) {\n    Model = mongoose.model('block', BlockSchema)\n  }\n  return Model\n}\n"]}