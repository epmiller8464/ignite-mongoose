{"version":3,"sources":["../../lib/log.js"],"names":["mongoose","require","module","exports","LogSchema","Schema","pid","String","hostname","level","Number","msg","time","status","req","method","url","headers","host","connection","remoteAddress","remotePort","capped","collection","Model","model","e"],"mappings":"AAAA;;AACA,IAAIA,WAAWC,QAAQ,UAAR,CAAf;;AAEAC,OAAOC,OAAP,GAAiB,YAAY;AAC3B,MAAIC,YAAY,IAAIJ,SAASK,MAAb,CAAoB;AAClCC,SAAKC,MAD6B;AAElCC,cAAUD,MAFwB;AAGlCE,WAAOC,MAH2B;AAIlCC,SAAKJ,MAJ6B;AAKlCK,UAAMF,MAL4B;AAMlCG,YAAQH,MAN0B;AAOlCI,SAAK;AACHC,cAAQR,MADL;AAEHS,WAAKT,MAFF;AAGHU,eAAS;AACPC,cAAMX,MADC;AAEPY,oBAAYZ;AAFL,OAHN;AAOHa,qBAAeb,MAPZ;AAQHc,kBAAYX;AART;AAP6B,GAApB,EAiBb,EAACY,QAAQ,OAAT,EAjBa,EAiBM,EAACC,YAAY,KAAb,EAjBN,CAAhB;;AAmBA,MAAIC,cAAJ;AACA,MAAI;AACF;AACAA,YAAQxB,SAASyB,KAAT,CAAe,KAAf,CAAR;AACD,GAHD,CAGE,OAAOC,CAAP,EAAU;AACVF,YAAQxB,SAASyB,KAAT,CAAe,KAAf,EAAsBrB,SAAtB,CAAR;AACD;AACD,SAAOoB,KAAP;AAED,CA7BD","file":"log.js","sourcesContent":["'use strict'\nvar mongoose = require('mongoose')\n\nmodule.exports = function () {\n  var LogSchema = new mongoose.Schema({\n    pid: String,\n    hostname: String,\n    level: Number,\n    msg: String,\n    time: Number,\n    status: Number,\n    req: {\n      method: String,\n      url: String,\n      headers: {\n        host: String,\n        connection: String\n      },\n      remoteAddress: String,\n      remotePort: Number\n    }\n  }, {capped: 5242880}, {collection: 'log'})\n\n  let Model\n  try {\n    // Throws an error if \"Name\" hasn't been registered\n    Model = mongoose.model('log')\n  } catch (e) {\n    Model = mongoose.model('log', LogSchema)\n  }\n  return Model\n\n}"]}